<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T-FAN Neural Optimizer</title>
    <link rel="stylesheet" href="/static/css/dashboard.css">
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1>üß† T-FAN Neural Optimizer</h1>
                <div class="status-indicator">
                    <span id="connection-status" class="status-dot disconnected"></span>
                    <span id="connection-text">Connecting...</span>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Sidebar -->
            <aside class="sidebar">
                <nav class="nav">
                    <a href="#metrics" class="nav-item active" data-section="metrics">
                        üìä Metrics
                    </a>
                    <a href="#pareto" class="nav-item" data-section="pareto">
                        üéØ Pareto
                    </a>
                    <a href="#training" class="nav-item" data-section="training">
                        üöÄ Training
                    </a>
                    <a href="#configs" class="nav-item" data-section="configs">
                        ‚öôÔ∏è Configs
                    </a>
                </nav>
            </aside>

            <!-- Content Area -->
            <main class="content">
                <!-- Metrics Section -->
                <section id="metrics-section" class="section active">
                    <h2>Live Metrics</h2>

                    <div class="metrics-grid">
                        <div class="metric-card">
                            <div class="metric-icon">üìà</div>
                            <div class="metric-value" id="metric-accuracy">0.000</div>
                            <div class="metric-label">Accuracy</div>
                        </div>

                        <div class="metric-card">
                            <div class="metric-icon">‚è±Ô∏è</div>
                            <div class="metric-value" id="metric-latency">0.0</div>
                            <div class="metric-label">Latency (ms)</div>
                        </div>

                        <div class="metric-card">
                            <div class="metric-icon">üìä</div>
                            <div class="metric-value" id="metric-hypervolume">0</div>
                            <div class="metric-label">Hypervolume</div>
                        </div>

                        <div class="metric-card">
                            <div class="metric-icon">üéØ</div>
                            <div class="metric-value" id="metric-epr-cv">0.000</div>
                            <div class="metric-label">EPR CV</div>
                        </div>
                    </div>

                    <div class="training-status">
                        <h3>Training Status</h3>
                        <div class="status-info">
                            <div class="status-badge" id="training-badge">‚óè Idle</div>
                            <div class="status-detail">
                                <span id="training-step">Step: 0</span>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Pareto Section -->
                <section id="pareto-section" class="section">
                    <h2>Pareto Optimization</h2>

                    <div class="pareto-controls">
                        <h3>Decision Weights</h3>
                        <p class="help-text">Adjust weights to prioritize different objectives</p>

                        <div class="weight-sliders">
                            <div class="slider-group">
                                <label>Accuracy (maximize)</label>
                                <input type="range" id="weight-accuracy" min="0" max="20" step="0.5" value="10">
                                <span class="slider-value" id="value-accuracy">10.0</span>
                            </div>

                            <div class="slider-group">
                                <label>Latency (minimize)</label>
                                <input type="range" id="weight-latency" min="0" max="10" step="0.1" value="1">
                                <span class="slider-value" id="value-latency">1.0</span>
                            </div>

                            <div class="slider-group">
                                <label>EPR CV (minimize)</label>
                                <input type="range" id="weight-epr" min="0" max="10" step="0.1" value="2">
                                <span class="slider-value" id="value-epr">2.0</span>
                            </div>

                            <div class="slider-group">
                                <label>Topo Gap (minimize)</label>
                                <input type="range" id="weight-topo" min="0" max="10" step="0.1" value="1">
                                <span class="slider-value" id="value-topo">1.0</span>
                            </div>

                            <div class="slider-group">
                                <label>Energy (minimize)</label>
                                <input type="range" id="weight-energy" min="0" max="5" step="0.1" value="0.5">
                                <span class="slider-value" id="value-energy">0.5</span>
                            </div>
                        </div>

                        <button class="btn btn-primary" id="apply-weights-btn">Apply Weights</button>
                    </div>

                    <div class="pareto-viz">
                        <h3>Pareto Front Visualization</h3>
                        <div id="pareto-plot" class="plot-container"></div>
                    </div>

                    <div class="pareto-run">
                        <h3>Run Optimization</h3>
                        <div class="form-group">
                            <label>Iterations</label>
                            <input type="number" id="pareto-iterations" value="100" min="10" max="1000">
                        </div>
                        <div class="form-group">
                            <label>Initial Points</label>
                            <input type="number" id="pareto-initial" value="10" min="5" max="50">
                        </div>
                        <button class="btn btn-success" id="run-pareto-btn">üéØ Run Optimization</button>
                        <div id="pareto-status" class="status-message"></div>
                    </div>
                </section>

                <!-- Training Section -->
                <section id="training-section" class="section">
                    <h2>Training Control</h2>

                    <div class="training-controls">
                        <div class="form-group">
                            <label>Configuration</label>
                            <select id="training-config">
                                <option value="configs/auto/best.yaml">Auto-selected (best.yaml)</option>
                                <option value="configs/7b/quanta_focus.yaml">QUANTA Focus</option>
                                <option value="configs/7b/default.yaml">Default</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>Max Steps</label>
                            <input type="number" id="training-steps" value="20000" min="100">
                        </div>

                        <div class="button-group">
                            <button class="btn btn-success" id="start-training-btn">üöÄ Start Training</button>
                            <button class="btn btn-danger" id="stop-training-btn" disabled>‚èπÔ∏è Stop Training</button>
                        </div>
                    </div>

                    <div class="training-logs">
                        <h3>Training Logs</h3>
                        <div id="training-log-output" class="log-output"></div>
                    </div>
                </section>

                <!-- Configs Section -->
                <section id="configs-section" class="section">
                    <h2>Configurations</h2>

                    <div class="configs-list">
                        <h3>Available Configs</h3>
                        <div id="configs-list-container" class="configs-container">
                            <!-- Populated by JavaScript -->
                        </div>
                    </div>
                </section>
            </main>
        </div>
    </div>

    <script src="/static/js/dashboard.js"></script>
</body>
</html>
