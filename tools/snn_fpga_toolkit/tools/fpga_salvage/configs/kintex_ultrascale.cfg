# OpenOCD Configuration for Xilinx Kintex UltraScale+ FPGAs
# Common in mid-range cryptocurrency mining hardware
#
# Usage: openocd -f kintex_ultrascale.cfg

# ============================================================================
# JTAG Adapter Configuration
# ============================================================================

adapter driver ftdi
ftdi_vid_pid 0x0403 0x6010

ftdi_layout_init 0x0088 0x008b
ftdi_layout_signal nTRST -data 0x0010 -oe 0x0010
ftdi_layout_signal nSRST -data 0x0020 -oe 0x0020

# JTAG speed
adapter speed 10000

# ============================================================================
# Kintex UltraScale+ Target Configuration
# ============================================================================

# Kintex UltraScale+ JTAG IDCODE variants:
# - KU3P:  0x04A62093 (small, 216K logic cells)
# - KU5P:  0x04A7E093 (medium, 356K logic cells)
# - KU9P:  0x0484A093 (large, 600K logic cells - rare)
# - KU15P: 0x04A52093 (very large, 857K logic cells)

jtag newtap kintex tap -irlen 6 -expected-id 0x04A62093 -expected-id 0x04A7E093 -expected-id 0x0484A093 -expected-id 0x04A52093

target create kintex.fpga testee -chain-position kintex.tap

# ============================================================================
# Configuration Memory
# ============================================================================

# Kintex UltraScale+ mining boards typically use:
# - Quad SPI Flash (64MB to 256MB)
# - Some use BPI flash for faster boot

# ============================================================================
# Mining Board Specific Notes
# ============================================================================

# Common Kintex UltraScale+ mining boards:
#
# 1. Baikal Giant B (KU5P)
#    - Designed for CryptoNight mining
#    - Custom firmware with locked flash
#    - 16GB DDR4
#
# 2. HTX Mining Card (KU9P)
#    - PCIe x16 form factor
#    - Optimized for Ethash
#    - Standard Xilinx configuration
#
# 3. Various Chinese mining cards (KU3P/KU5P)
#    - Often use cheap development board clones
#    - Usually unencrypted bitstreams

# ============================================================================
# Useful Commands
# ============================================================================

# Scan chain: openocd -f kintex_ultrascale.cfg -c "init; scan_chain; shutdown"
# Program: Use Vivado Lab Edition (free from Xilinx)
