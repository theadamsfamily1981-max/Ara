# =============================================================================
# Ara OpenVPN Server Configuration
# =============================================================================
# Generated by Ansible - DO NOT EDIT MANUALLY
# OpenVPN is provided for compatibility only; prefer WireGuard.
# =============================================================================

# Network
port {{ ovpn_port }}
proto udp
dev tun

# Server
server {{ ovpn_network | regex_replace('/[0-9]+', '') }} 255.255.255.0

# Routing
push "redirect-gateway def1 bypass-dhcp"
push "dhcp-option DNS 1.1.1.1"
push "dhcp-option DNS 8.8.8.8"

# Keep connection alive
keepalive 10 120

# Security
cipher AES-256-GCM
auth SHA256
tls-version-min 1.2

# Reduce privileges
user nobody
group nogroup
persist-key
persist-tun

# Logging
status /var/log/openvpn-status.log
log-append /var/log/openvpn.log
verb 3
mute 20

# Certificates (generate with easy-rsa or your PKI)
# ca /etc/openvpn/server/ca.crt
# cert /etc/openvpn/server/server.crt
# key /etc/openvpn/server/server.key
# dh /etc/openvpn/server/dh.pem
# tls-auth /etc/openvpn/server/ta.key 0

# NOTE: This is a placeholder configuration.
# For production, you must:
# 1. Generate PKI certificates
# 2. Configure client authentication
# 3. Set up proper firewall rules
